building_giga_habitat_zro_harvester = {
	base_buildtime = 400
	is_capped_by_modifier = yes
	category = resource
	potential = {
		planet = { is_planet_class = pc_interstellar_habitat }
		owner = { is_regular_empire = yes }
	}
	ai_weight = { weight = 10 }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = { job_giga_zro_extractor_add = 1 }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = { job_giga_zro_extractor_drone_add = 1 }
	}

	resources = {
		category = planet_buildings
		cost = { minerals = 400 }
		upkeep = { energy = 1 }
	}
}

building_giga_elysium_dust_sifter = {
	base_buildtime = 350
	base_cap_amount = 4
	category = manufacturing
	ai_weight = { weight = 2 }
	potential = { planet = { is_planet_class = pc_gigaorbital_ring } }
	allow = { has_upgraded_capital = yes }
	prerequisites = { "giga_tech_orbital_elysium" }

	resources = {
		category = planet_buildings
		cost = { minerals = 600 }
		produces = { volatile_motes = 1 }
		upkeep = { energy = 3.5 }
	}

	ai_resource_production = {
		volatile_motes = 1
		trigger = { always = yes }
	}
}

building_giga_iodizium_plant = {
	base_buildtime = 350
	category = manufacturing
	allow = { has_upgraded_capital = yes }
	prerequisites = { "giga_tech_alderson_disk" }

	potential = {
		planet = {
			NOT = { is_planet_class = pc_habitat }
		}
	}
	
	triggered_planet_modifier = {
		modifier = {
			job_ald_matter_synthesizer_add = 2
		}
	}

	resources = {
		category = planet_buildings
		cost = { minerals = 1000 }
		upkeep = {
			energy = 300
		}
	}

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			owner = { resource_stockpile_compare = { resource = sr_iodizium value >= 1 } }
		}
	}
}


building_giga_iodizium_research = {
	base_buildtime = 350
	category = manufacturing
	allow = { has_upgraded_capital = yes }
	prerequisites = { "giga_tech_fusion_suppressor" }

	potential = {
		planet = {
			owner = { resource_stockpile_compare = { resource = sr_iodizium value >= 1 } }
			NOT = { is_planet_class = pc_habitat }
		}
	}
	
	planet_modifier = {
		planet_researchers_physics_research_produces_add = 1
		planet_researchers_society_research_produces_add = 1
		planet_researchers_engineering_research_produces_add = 1
	}

	resources = {
		category = planet_buildings
		cost = { minerals = 1000 }
		upkeep = {
			minerals = 5
			sr_iodizium = 1
		}
		produces = {
			physics_research = 25
			society_research = 25
			engineering_research = 25
		}
	}

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			owner = { resource_stockpile_compare = { resource = sr_iodizium value >= 1 } }
		}
	}

	ai_resource_production = {
		physics_research = 10
		engineering_research = 10
		society_research = 10
		trigger = { always = yes }
	}
}

building_giga_shroud_capacitor = {
	base_buildtime = 1000
	base_cap_amount = 1
	category = manufacturing
	ai_weight = { weight = 5 }
	allow = { has_upgraded_capital = yes }
	prerequisites = { "giga_tech_psychic_hypersiphon_4" }

	planet_modifier = {
		planet_jobs_energy_produces_mult = 0.10
		planet_jobs_minerals_produces_mult = 0.10
		planet_jobs_society_research_produces_mult = 0.10
		planet_jobs_physics_research_produces_mult = 0.10
		planet_jobs_engineering_research_produces_mult = 0.10
		pop_happiness = 0.05
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 1000
			alloys = 50
		}
		upkeep = {
			unity = 10
			energy = 10
		}
		produces = { physics_research = 5 }
	}
}

### Minerals for the Equatorial Shipyard start : can't be built
building_giga_matter_synthesizer = {
	category = resource
	icon = building_bio_reprocessing_facilities
	can_build = no
	base_cap_amount = 1
	
	destroy_trigger = {
		exists = owner
		planet = {
			free_building_slots = 0
			owner = {
				is_ai = yes
				has_monthly_income = {
					resource = minerals
					value > 100
				}
			}
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_matter_synthesizer_add = 5
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = no }
		}
		modifier = {
			job_matter_synthesizer_drone_add = 5
		}
	}
}
	

### Hydroponics for the Interstellar ringworld start : can't be built
building_giga_interstellar_hydroponic_farm = {
	category = resource
	icon = building_hydroponics_farm
	can_build = no
	base_cap_amount = 1 # for fancy background

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				is_ai = yes
				country_uses_food = no
			}
			planet = {
				free_building_slots = 0
				owner = {
					is_ai = yes
					has_monthly_income = {
						resource = food
						value > 100
					}
				}
			}
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_farmer_add = 6
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_agri_drone_add = 7
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_agri_drone_add = 3
		}
	}

	resources = {
		category = planet_buildings
		upkeep = {
			energy = 2
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_agri_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_farmer_effect_desc
	}

	ai_weight = { weight = 0 }
}

building_ehof_sm_forge_1 = {
	base_buildtime = @b3_time
	category = manufacturing
	upgrades = { building_ehof_sm_forge_2 }
	prerequisites = { tech_ehof_sentient_tier_1 }

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		building_relaxed_basic_income_check = yes
	}

	allow = {
		has_upgraded_capital = yes
		buildings_upgrade_allow = yes
	}

	destroy_trigger = { OR = { has_modifier = resort_colony has_modifier = slave_colony } }

	triggered_planet_modifier = { potential = { exists = owner owner = { is_hive_empire = yes } }		modifier = { job_ehof_cultivation_drone_add = @b1_jobs } }
	triggered_planet_modifier = { potential = { exists = owner owner = { is_machine_empire = yes } }	modifier = { job_ehof_cultivation_drone_add = @b1_jobs } }
	triggered_planet_modifier = { potential = { exists = owner owner = { is_regular_empire = yes } }	modifier = { job_ehof_cultivator_add = @b1_jobs } }

	triggered_desc = { trigger = { exists = owner owner = { is_hive_empire = yes } }	text = job_ehof_cultivation_drone_effect_desc }
	triggered_desc = { trigger = { exists = owner owner = { is_machine_empire = yes } }	text = job_ehof_cultivation_drone_effect_desc }
	triggered_desc = { trigger = { exists = owner owner = { is_regular_empire = yes } }	text = job_ehof_cultivator_effect_desc }

	resources = {
		category = planet_buildings
		cost = { minerals = @b3_minerals }
		upkeep = { energy = @b3_upkeep }
	}

	ai_weight = {
		weight = 10
		modifier = {
			factor = 50
			NOR = {
				has_building = building_ehof_sm_forge_1
				has_building = building_ehof_sm_forge_2
			}
		}
		modifier = {
			factor = 50
			owner = { has_monthly_income = { resource = ehof_sr_sentient_metal value < 50 } }
		}
		modifier = {
			factor = 50
			owner = { has_monthly_income = { resource = ehof_sr_sentient_metal value < 1 } }
		}
		modifier = {
			factor = 50
			has_building = building_ehof_sm_forge_1
			free_building_slots = 0
		}
	}

	ai_resource_production = {
		ehof_sr_sentient_metal = 1
		trigger = { always = yes }
	}
}

building_ehof_sm_forge_2 = {
	base_buildtime = @b4_time
	can_build = no
	category = manufacturing
	prerequisites = { tech_ehof_sentient_tier_3 }

	allow = {
		has_major_upgraded_capital = yes
		buildings_upgrade_allow = yes
	}

	destroy_trigger = { OR = { has_modifier = resort_colony has_modifier = slave_colony } }

	triggered_planet_modifier = { potential = { exists = owner owner = { is_hive_empire = yes } }		modifier = { job_ehof_cultivation_drone_add = @b2_jobs } }
	triggered_planet_modifier = { potential = { exists = owner owner = { is_machine_empire = yes } }	modifier = { job_ehof_cultivation_drone_add = @b2_jobs } }
	triggered_planet_modifier = { potential = { exists = owner owner = { is_regular_empire = yes } }	modifier = { job_ehof_cultivator_add = @b2_jobs } }

	triggered_desc = { trigger = { exists = owner owner = { is_hive_empire = yes } }	text = job_ehof_cultivation_drone_effect_desc }
	triggered_desc = { trigger = { exists = owner owner = { is_machine_empire = yes } }	text = job_ehof_cultivation_drone_effect_desc }
	triggered_desc = { trigger = { exists = owner owner = { is_regular_empire = yes } }	text = job_ehof_cultivator_effect_desc }

	resources = {
		category = planet_buildings
		cost = { minerals = @b4_minerals }
		upkeep = { energy = @b4_upkeep }
	}

	ai_weight = { weight = 1000 }

	ai_resource_production = {
		ehof_sr_sentient_metal = 1
		trigger = { always = yes }
	}
}


# OVERWRITTEN

building_ministry_production = {
	base_buildtime = @b2_time
	base_cap_amount = 1
	icon = building_production_center

	category = manufacturing

	potential = {
		exists = owner
		owner = { is_regular_empire = yes }
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_regular_empire = no }
			has_modifier = resort_colony
			has_modifier = slave_colony
			buildings_no_motes = yes
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	planet_modifier = {
		job_administrator_add = 1
		planet_metallurgists_produces_mult = 0.15
		planet_artisans_produces_mult = 0.15
		planet_cultivators_produces_mult = 0.15
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			volatile_motes = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
			volatile_motes = @b2_rare_upkeep
		}
	}

	prerequisites = {
		"tech_global_production_strategy"
	}

	triggered_desc = {
		text = job_administrator_effect_desc
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	ai_resource_production = {
		trigger = { always = yes }
		alloys = 3
		consumer_goods = 6
	}
	ai_resource_production = {
		alloys = 3
		trigger = {
			planet_resource_compare = {
				resource = alloys
				value >= 20
				type = produces
			}
		}
	}
	ai_resource_production = {
		alloys = 3
		trigger = {
			planet_resource_compare = {
				resource = alloys
				value >= 40
				type = produces
			}
		}
	}
	ai_resource_production = {
		consumer_goods = 5
		trigger = {
			planet_resource_compare = {
				resource = consumer_goods
				value >= 33
				type = produces
			}
		}
	}
	ai_resource_production = {
		consumer_goods = 5
		trigger = {
			planet_resource_compare = {
				resource = consumer_goods
				value >= 66
				type = produces
			}
		}
	}
}

building_production_center = {
	base_buildtime = @b2_time
	base_cap_amount = 1

	category = manufacturing

	potential = {
		exists = owner
		owner = { is_gestalt = yes }
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_gestalt = no }
			buildings_no_motes = yes
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	planet_modifier = {
		planet_metallurgists_produces_mult = 0.15
		planet_artisans_produces_mult = 0.15
		planet_cultivators_produces_mult = 0.15
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			volatile_motes = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
			volatile_motes = @b2_rare_upkeep
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_catalytic_empire = no
			}
		}
		job_alloy_drone_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_catalytic_empire = yes
			}
		}
		job_catalytic_drone_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
				is_catalytic_empire = no
			}
		}
		job_fabricator_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
				is_catalytic_empire = yes
			}
		}
		job_catalytic_drone_add = 1
	}

	prerequisites = {
		"tech_global_production_strategy"
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_catalytic_empire = no
			}
		}
		text = job_alloy_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_machine_empire = yes
				is_catalytic_empire = no
			}
		}
		text = job_fabricator_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_catalytic_empire = yes
			}
		}
		text = job_catalytic_drone_effect_desc
	}

	show_tech_unlock_if = {
		is_gestalt = yes
	}

	ai_resource_production = {
		trigger = { always = yes }
		alloys = 3
	}
	ai_resource_production = {
		trigger = {
			owner = {
				country_uses_consumer_goods = yes
			}
		}
		consumer_goods = 6
	}
	ai_resource_production = {
		alloys = 3
		trigger = {
			planet_resource_compare = {
				resource = alloys
				value >= 20
				type = produces
			}
		}
	}
	ai_resource_production = {
		alloys = 3
		trigger = {
			planet_resource_compare = {
				resource = alloys
				value >= 40
				type = produces
			}
		}
	}
	ai_resource_production = {
		consumer_goods = 5
		trigger = {
			planet_resource_compare = {
				resource = consumer_goods
				value >= 33
				type = produces
			}
		}
	}
	ai_resource_production = {
		consumer_goods = 5
		trigger = {
			planet_resource_compare = {
				resource = consumer_goods
				value >= 66
				type = produces
			}
		}
	}
}

### Gas Giant Habitation Module : farmers / miners for gas giant start : can't be built
building_giga_gas_giant_habitation_module = {
	category = resource
	icon = building_bio_reprocessing_facilities
	can_build = no
	base_cap_amount = 1

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				is_ai = yes
			}
			planet = {
				free_building_slots = 0
				free_amenities > 5
				owner = {
					is_ai = yes
					has_monthly_income = { resource = food      value > 100 }
					has_monthly_income = { resource = minerals  value > 100 }
				}
			}
		}
	}

	resources = {
		category = planet_buildings
		upkeep = {
			energy = 3
		}
	}

	# non-lithoid non-gestalts : 3 technicians, 2 miners, 5 farmers
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_lithoid_empire = no
			}
		}
		modifier = {
			job_technician_add = 3
			job_miner_add = 2
			job_farmer_add = 5
		}
	}
	# lithoid non-gestalts : 3 technicians, 6 miners
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
				is_lithoid_empire = yes
			}
		}
		modifier = {
			job_technician_add = 3
			job_miner_add = 6
		}
	}
	# non-lithoid bio hives : 5 technician drones, 2 mining drones, 6 agri-drones
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = no
			}
		}
		modifier = {
			job_technician_drone_add = 5
			job_mining_drone_add = 2
			job_agri_drone_add = 6
		}
	}
	# lithoid bio hives : 5 technician drones, 8 mining-drones
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = yes
			}
		}
		modifier = {
			job_technician_drone_add = 5
			job_mining_drone_add = 8
		}
	}
	# machine emipiers (normal) : 6 technician drones, 2 mining drones
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
				NOR = {
					has_valid_civic = civic_machine_assimilator
					has_valid_civic = civic_machine_servitor
				}
			}
		}
		modifier = {
			job_technician_drone_add = 6
			job_mining_drone_add = 2
		}
	}
	# machine emipiers (RS/DA) : 6 technician drones, 2 mining drones, 2 agri-drones
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
				OR = {
					has_valid_civic = civic_machine_assimilator
					has_valid_civic = civic_machine_servitor
				}
			}
		}
		modifier = {
			job_technician_drone_add = 6
			job_mining_drone_add = 2
			job_agri_drone_add = 2
		}
	}

	# amenities (non-gestalts)
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = {
			planet_amenities_add = 10
		}
	}
	# amenities (gestalts)
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			planet_amenities_no_happiness_add = 10
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_technician_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_mining_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes is_lithoid_empire = no }
		}
		text = job_agri_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_miner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_technician_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no is_lithoid_empire = no }
		}
		text = job_farmer_effect_desc
	}

	ai_weight = { weight = 0 }
}

building_solar_farm = {
	category = resource
	can_build = no

	resources = {
		category = planet_buildings
		produces = { energy = 10 }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_technician_drone_add = 8
			job_maintenance_drone_add = 6
		}
	}
}

#DEFENSE NEXUS
building_defense_nexus_construction = {
	category = army
	can_build = yes
	triggered_desc = {
		trigger = { exists = owner }
		text = building_defense_nexus_construction_effect_desc
	}

	base_buildtime = 720

	prerequisites = { giga_tech_planetary_drive_yard_defense }

	allow = { 
		OR = {
			has_modifier = planetary_drive_yard_fortress_modifier
			has_modifier = planetary_drive_yard_fortress_modifier_gestalt
		}
	}

	potential = {
		OR = {
			has_modifier = planetary_drive_yard_fortress_modifier
			has_modifier = planetary_drive_yard_fortress_modifier_gestalt
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			alloys = 800
			minerals = 1000
		}
		produces = {
			engineering_research = 10
		}
		upkeep = {
			energy = 5
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = {
			job_soldier_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_warrior_drone_add = 2
		}
	}

	on_built = {
		change_variable = {
			which = giga_defense_nexus_construction_count
			value = 3
		}
	}

	on_destroy = {
		subtract_variable = {
			which = giga_defense_nexus_construction_count
			value = 3
		}
	}
}

building_defense_nexus_capacity = {
	category = army
	can_build = yes
	triggered_desc = {
		trigger = { exists = owner }
		text = building_defense_nexus_capacity_effect_desc
	}

	base_buildtime = 720

	prerequisites = { giga_tech_planetary_drive_yard_defense }

	allow = { 
		OR = {
			has_modifier = planetary_drive_yard_fortress_modifier
			has_modifier = planetary_drive_yard_fortress_modifier_gestalt
		}
	}

	potential = {
		OR = {
			has_modifier = planetary_drive_yard_fortress_modifier
			has_modifier = planetary_drive_yard_fortress_modifier_gestalt
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			alloys = 1000
			minerals = 2000
		}
		produces = {
			engineering_research = 25
		}
		upkeep = {
			energy = 5
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = {
			job_soldier_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_warrior_drone_add = 2
		}
	}

	on_built = {
		change_variable = {
			which = giga_defense_nexus_storage_count
			value = 15
		}
	}

	on_destroy = {
		subtract_variable = {
			which = giga_defense_nexus_storage_count
			value = 15
		}
	}
}

building_research_lab_3 = {
	base_buildtime = @b3_time
	can_build = no

	category = research

	allow = {
		has_major_upgraded_capital = yes
	}

	upgrades = {
    	"building_giga_research_lab_1"
    }

	destroy_trigger = {
		OR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
			buildings_no_exotic_gases = yes
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_researcher_add = @b3_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_brain_drone_add = @b3_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_calculator_add = @b3_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_gestalt_add = 1
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
		}
		upkeep = {
			trigger = {
				owner = {
					is_galactic_community_member = yes
				}
				is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
				planet = {
					has_modifier = pm_extradimensional_experimentation
				}
			}
			sr_zro = 1
		}
	}

	prerequisites = {
		"tech_basic_science_lab_3"
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		text = job_researcher_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_brain_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_calculator_effect_desc
	}
}

# Abstract Examination Institute
building_giga_research_lab_1 = {
	base_buildtime = @b4_time
	can_build = no

	category = research

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		OR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
			buildings_no_exotic_gases = yes
		}
	}

	upgrades = {
    	"building_giga_research_lab_2"
    }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_researcher_add = 8
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_brain_drone_add = 8
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_calculator_add = 8
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_gestalt_add = 2
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 1400
			exotic_gases =150
			rare_crystals = 50
		}
		upkeep = {
			energy = 9
			exotic_gases = 3
			rare_crystals = 1
		}
		upkeep = {
			trigger = {
				owner = {
					is_galactic_community_member = yes
				}
				is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
				planet = {
					has_modifier = pm_extradimensional_experimentation
				}
			}
			sr_zro = 1
		}
	}

	prerequisites = {
		"tech_u_r_e_t"
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		text = job_researcher_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_brain_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_calculator_effect_desc
	}
}

# Non-Localized Research Facility
building_giga_research_lab_2 = {
	base_buildtime = @b4_time
	can_build = no

	category = research

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		OR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
			buildings_no_exotic_gases = yes
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_researcher_add = 10
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_brain_drone_add = 10
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_calculator_add = 10
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_add = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_galactic_community_member = yes
			}
			is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
			has_modifier = pm_extradimensional_experimentation
		}
		modifier = {
			job_dimensional_portal_researcher_gestalt_add = 3
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b4_minerals
			exotic_gases = @b4_rare_cost
			rare_crystals = 100
			volatile_motes = 50
		}
		upkeep = {
			energy = @b4_upkeep
			exotic_gases = @b4_rare_upkeep
			rare_crystals = @b2_rare_upkeep
            volatile_motes = 1
		}
		upkeep = {
			trigger = {
				owner = {
					is_galactic_community_member = yes
				}
				is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
				planet = {
					has_modifier = pm_extradimensional_experimentation
				}
			}
			sr_zro = 1
		}
	}

	prerequisites = {
		"tech_non_local_r_i"
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		text = job_researcher_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_brain_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_calculator_effect_desc
	}
}

building_institute = {
	base_buildtime = @b2_time
	base_cap_amount = 1

	category = research

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		exists = owner
		owner = { is_regular_empire = yes }
	}

	upgrades = {
    	"building_giga_institute_1"
    }

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			owner = { is_regular_empire = no }
			buildings_no_exotic_gases = yes
		}
	}

	convert_to = {
		building_supercomputer
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			exotic_gases = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
			exotic_gases = @b2_rare_upkeep
		}
	}

	planet_modifier = {
		planet_researchers_produces_mult = 0.15
		job_head_researcher_add = 1
	}

	prerequisites = {
		"tech_global_research_initiative"
	}

	triggered_desc = {
		text = job_head_researcher_effect_desc
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	ai_resource_production = {
		trigger = { always = yes }
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 20
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 40
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
}

# Unorthodox Research Facility
building_giga_institute_1 = {
    base_buildtime = @b3_time
    can_build = no

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		exists = owner
		owner = { is_regular_empire = yes }
	}

	upgrades = {
    	"building_giga_institute_2"
    }

	convert_to = {
		building_giga_supercomputer_1
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			owner = { is_regular_empire = no }
			buildings_no_exotic_gases = yes
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
			rare_crystals = @b2_rare_cost
            volatile_motes = 50
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
			rare_crystals = @b2_rare_upkeep
			volatile_motes = 1
		}
	}

	planet_modifier = {
		planet_researchers_produces_mult = 0.3
		job_head_researcher_add = 2
	}

	prerequisites = {
		"tech_u_r_e_t"
	}

	triggered_desc = {
		text = job_head_researcher_effect_desc
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	ai_resource_production = {
		trigger = { always = yes }
		physics_research = 6
		society_research = 6
		engineering_research = 6
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 40
			}
		}
		physics_research = 6
		society_research = 6
		engineering_research = 6
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 80
			}
		}
		physics_research = 6
		society_research = 6
		engineering_research = 6
	}
}

# Supercausal Science Nexus
building_giga_institute_2 = {
    base_buildtime = @b4_time
    can_build = no

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		exists = owner
		owner = { is_regular_empire = yes }
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			owner = { is_regular_empire = no }
			buildings_no_exotic_gases = yes
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b4_minerals
			exotic_gases = @b4_rare_cost#
			rare_crystals = @b3_rare_cost
			volatile_motes = @b2_rare_cost
			ehof_sr_negative_mass = 20
		}
		upkeep = {
			energy = @b4_upkeep
			exotic_gases = @b4_rare_upkeep
			rare_crystals = @b3_rare_upkeep
			volatile_motes = @b2_rare_upkeep
			ehof_sr_negative_mass = 1
		}
	}

	planet_modifier = {
		planet_researchers_produces_mult = 0.45
		job_head_researcher_add = 3
	}

	prerequisites = {
		"tech_non_local_r_i"
	}

	triggered_desc = {
		text = job_head_researcher_effect_desc
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	ai_resource_production = {
		trigger = { always = yes }
		physics_research = 9
		society_research = 9
		engineering_research = 9
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 60
			}
		}
		physics_research = 9
		society_research = 9
		engineering_research = 9
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 120
			}
		}
		physics_research = 9
		society_research = 9
		engineering_research = 9
	}
}

building_supercomputer = {
	base_buildtime = @b2_time
	base_cap_amount = 1
	icon = building_institute

	category = research

	potential = {
		exists = owner
		owner = { is_gestalt = yes }
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}

	upgrades = {
    	"building_giga_supercomputer_1"
    }

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			owner = { is_regular_empire = yes }
		}
	}

	convert_to = {
		building_institute
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}
		upkeep = {
			energy = @b2_upkeep
		}
	}

	planet_modifier = {
		planet_researchers_produces_mult = 0.15
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_brain_drone_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_calculator_add = 1
		}
	}

	prerequisites = {
		"tech_global_research_initiative"
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_brain_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_calculator_effect_desc
	}

	show_tech_unlock_if = {
		is_gestalt = yes
	}

	ai_resource_production = {
		trigger = { always = yes }
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 20
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 40
			}
		}
		physics_research = 3
		society_research = 3
		engineering_research = 3
	}
}

building_giga_supercomputer_1 = {
    base_buildtime = @b3_time
    icon = building_giga_institute_1
    can_build = no

	category = research

	potential = {
		exists = owner
		owner = { is_gestalt = yes }
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}

	upgrades = {
    	"building_giga_supercomputer_2"
    }

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			owner = { is_regular_empire = yes }
		}
	}

	convert_to = {
		building_giga_institute_1
	}

	show_tech_unlock_if = {
		is_gestalt = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
			rare_crystals = @b2_rare_cost
            volatile_motes = 50
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
			rare_crystals = @b2_rare_upkeep
			volatile_motes = 1
		}
	}

	planet_modifier = {
		planet_researchers_produces_mult = 0.3
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_brain_drone_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_calculator_add = 2
		}
	}

	prerequisites = {
		"tech_u_r_e_t"
	}

	triggered_desc = {
		text = job_head_researcher_effect_desc
	}

	show_tech_unlock_if = {
		is_gestalt = yes
	}

	ai_resource_production = {
		trigger = { always = yes }
		physics_research = 6
		society_research = 6
		engineering_research = 6
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 40
			}
		}
		physics_research = 6
		society_research = 6
		engineering_research = 6
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 80
			}
		}
		physics_research = 6
		society_research = 6
		engineering_research = 6
	}
}

building_giga_supercomputer_2 = {
    base_buildtime = @b4_time
    icon = building_giga_institute_2
    can_build = no

	category = research

	potential = {
		exists = owner
		owner = { is_gestalt = yes }
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			owner = { is_regular_empire = yes }
		}
	}

	convert_to = {
		building_giga_institute_2
	}

	show_tech_unlock_if = {
		is_gestalt = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b4_minerals
			exotic_gases = @b4_rare_cost#
			rare_crystals = @b3_rare_cost
			volatile_motes = @b2_rare_cost
			ehof_sr_negative_mass = 20
		}
		upkeep = {
			energy = @b4_upkeep
			exotic_gases = @b4_rare_upkeep
			rare_crystals = @b3_rare_upkeep
			volatile_motes = @b2_rare_upkeep
			ehof_sr_negative_mass = 1
		}
	}

	planet_modifier = {
		planet_researchers_produces_mult = 0.45
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_brain_drone_add = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_calculator_add = 3
		}
	}

	prerequisites = {
		"tech_non_local_r_i"
	}

	triggered_desc = {
		text = job_head_researcher_effect_desc
	}

	show_tech_unlock_if = {
		is_gestalt = yes
	}

	ai_resource_production = {
		trigger = { always = yes }
		physics_research = 9
		society_research = 9
		engineering_research = 9
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 60
			}
		}
		physics_research = 9
		society_research = 9
		engineering_research = 9
	}
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 120
			}
		}
		physics_research = 9
		society_research = 9
		engineering_research = 9
	}
}

building_energy_nexus = {
	base_buildtime = @b2_time
	can_build = no
	category = resource

	allow = {
		has_upgraded_capital = yes
	}

    upgrades = {
        building_giga_energy_nexus_1
    }

	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			buildings_no_exotic_gases = yes
		}
	}

	planet_modifier = {
		planet_technician_energy_produces_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				is_fallen_empire_spiritualist = no
			}
		}
		modifier = {
			job_technician_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		modifier = {
			job_fe_acolyte_generator_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_technician_drone_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_robot_empire = yes
			}
			NOR = {
				is_planet_class = pc_habitat
				is_planet_class = pc_machine
				is_planet_class = pc_hive
				is_planet_class = pc_city
			}
		}
		modifier = {
			district_generator_max = 4
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			exotic_gases = @b2_rare_cost
		}
		cost = {
			trigger = {
				owner = {
					is_robot_empire = yes
				}
			}
			minerals = 300
			alloys = 150
		}
		upkeep = {
			energy = 2
			exotic_gases = @b2_rare_upkeep
		}
	}

	prerequisites = {
		tech_power_hub_2
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_technician_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		text = job_technician_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		text = job_fe_acolyte_generator_effect_desc
	}

	ai_resource_production = {
		energy = 6
		trigger = {
			always = yes
		}
	}
	ai_resource_production = {
		energy = 6
		trigger = {
			planet_resource_compare = {
				resource = energy
				value >= 24
				type = produces
			}
		}
	}
	ai_resource_production = {
		energy = 6
		trigger = {
			planet_resource_compare = {
				resource = energy
				value >= 48
				type = produces
			}
		}
	}
}

# Laser Conduction Energy Distributor
building_giga_energy_nexus_1 = {
     base_buildtime = @b3_time
     can_build = no
     category = resource

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
			rare_crystals = 20
		}
		cost = {
			trigger = {
				owner = {
					is_robot_empire = yes
				}
			}
			minerals = 450
			alloys = 300
		}
		upkeep = {
			energy = 6
			exotic_gases = @b3_rare_upkeep
			rare_crystals = 1
		}
	}
 	destroy_trigger = {
 		OR = {
 			has_modifier = resort_colony
 			buildings_no_exotic_gases = yes
 		}
 	}

	prerequisites = {
		tech_l_conductor
	}

 	planet_modifier = {
 		planet_technician_energy_produces_add = 3
 	}

     upgrades = {
         building_giga_energy_nexus_2
     }

 	triggered_planet_modifier = {
 		potential = {
 			exists = owner
 			owner = {
 				is_regular_empire = yes
 				is_fallen_empire_spiritualist = no
 			}
 		}
 		modifier = {
 			job_technician_add = 3
 		}
 	}

 	triggered_planet_modifier = {
 		potential = {
 			exists = owner
 			owner = { is_fallen_empire_spiritualist = yes }
 		}
 		modifier = {
 			job_fe_acolyte_generator_add = 3
 		}
 	}

 	triggered_planet_modifier = {
 		potential = {
 			exists = owner
 			owner = { is_gestalt = yes }
 		}
 		modifier = {
 			job_technician_drone_add = 3
 		}
 	}

 	triggered_planet_modifier = {
 		potential = {
 			exists = owner
 			owner = {
 				is_robot_empire = yes
 			}
 			NOR = {
 				is_planet_class = pc_habitat
 				is_planet_class = pc_machine
 				is_planet_class = pc_hive
 				is_planet_class = pc_city
 			}
 		}
 		modifier = {
 			district_generator_max = 6
 		}
 	}

 	ai_resource_production = {
 		energy = 8
 		trigger = {
 			always = yes
 		}
 	}
 	ai_resource_production = {
 		energy = 8
 		trigger = {
 			planet_resource_compare = {
 				resource = energy
 				value >= 36
 				type = produces
 			}
 		}
 	}
 	ai_resource_production = {
 		energy = 8
 		trigger = {
 			planet_resource_compare = {
 				resource = energy
 				value >= 64
 				type = produces
 			}
 		}
 	}
}

# Hyperlane Power Transmitter
building_giga_energy_nexus_2 = {
     base_buildtime = @b4_time
     can_build = no
     category = resource

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b4_minerals
			exotic_gases = @b4_rare_cost
			rare_crystals = @b2_rare_cost
			volatile_motes = 20
		}
		cost = {
			trigger = {
				owner = {
					is_robot_empire = yes
				}
			}
			minerals = 600
			alloys = 450
		}
		upkeep = {
			energy = 8
			exotic_gases = @b4_rare_upkeep
			rare_crystals = @b2_rare_upkeep
			volatile_motes = 1
		}
	}

	prerequisites = {
		tech_hyperlane_p_t
	}

 	destroy_trigger = {
 		OR = {
 			has_modifier = resort_colony
 			buildings_no_exotic_gases = yes
 		}
 	}

 	planet_modifier = {
 		planet_technician_energy_produces_add = 4
 	}

     upgrades = {
         building_giga_energy_nexus_3
     }

 	triggered_planet_modifier = {
 		potential = {
 			exists = owner
 			owner = {
 				is_regular_empire = yes
 				is_fallen_empire_spiritualist = no
 			}
 		}
 		modifier = {
 			job_technician_add = 4
 		}
 	}

 	triggered_planet_modifier = {
 		potential = {
 			exists = owner
 			owner = { is_fallen_empire_spiritualist = yes }
 		}
 		modifier = {
 			job_fe_acolyte_generator_add = 4
 		}
 	}

 	triggered_planet_modifier = {
 		potential = {
 			exists = owner
 			owner = { is_gestalt = yes }
 		}
 		modifier = {
 			job_technician_drone_add = 4
 		}
 	}

 	triggered_planet_modifier = {
 		potential = {
 			exists = owner
 			owner = {
 				is_robot_empire = yes
 			}
 			NOR = {
 				is_planet_class = pc_habitat
 				is_planet_class = pc_machine
 				is_planet_class = pc_hive
 				is_planet_class = pc_city
 			}
 		}
 		modifier = {
 			district_generator_max = 8
 		}
 	}

 	ai_resource_production = {
 		energy = 8
 		trigger = {
 			always = yes
 		}
 	}
 	ai_resource_production = {
 		energy = 12
 		trigger = {
 			planet_resource_compare = {
 				resource = energy
 				value >= 48
 				type = produces
 			}
 		}
 	}
 	ai_resource_production = {
 		energy = 12
 		trigger = {
 			planet_resource_compare = {
 				resource = energy
 				value >= 90
 				type = produces
 			}
 		}
 	}
}

# Transstellar Field Entangler
building_giga_energy_nexus_3 = {
     base_buildtime = 1200
     can_build = no
     category = resource

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b4_minerals
			exotic_gases = @b4_rare_cost
			rare_crystals = @b3_rare_cost
			volatile_motes = @b2_rare_cost
			ehof_sr_negative_mass = 20
		}
		cost = {
			trigger = {
				owner = {
					is_robot_empire = yes
				}
			}
			minerals = 900
			alloys = 700
		}
		upkeep = {
			energy = 8
			exotic_gases = @b4_rare_upkeep
			rare_crystals = @b3_rare_upkeep
			volatile_motes = @b2_rare_upkeep
			ehof_sr_negative_mass = 1
		}
	}

	prerequisites = {
		tech_field_e_e_t
	}

 	destroy_trigger = {
 		OR = {
 			has_modifier = resort_colony
 			buildings_no_exotic_gases = yes
 		}
 	}

 	planet_modifier = {
 		planet_technician_energy_produces_add = 4
 	}

     upgrades = {
         building_giga_energy_nexus_3
     }

 	triggered_planet_modifier = {
 		potential = {
 			exists = owner
 			owner = {
 				is_regular_empire = yes
 				is_fallen_empire_spiritualist = no
 			}
 		}
 		modifier = {
 			job_technician_add = 5
 		}
 	}

 	triggered_planet_modifier = {
 		potential = {
 			exists = owner
 			owner = { is_fallen_empire_spiritualist = yes }
 		}
 		modifier = {
 			job_fe_acolyte_generator_add = 5
 		}
 	}

 	triggered_planet_modifier = {
 		potential = {
 			exists = owner
 			owner = { is_gestalt = yes }
 		}
 		modifier = {
 			job_technician_drone_add = 5
 		}
 	}

 	triggered_planet_modifier = {
 		potential = {
 			exists = owner
 			owner = {
 				is_robot_empire = yes
 			}
 			NOR = {
 				is_planet_class = pc_habitat
 				is_planet_class = pc_machine
 				is_planet_class = pc_hive
 				is_planet_class = pc_city
 			}
 		}
 		modifier = {
 			district_generator_max = 10
 		}
 	}

 	ai_resource_production = {
 		energy = 8
 		trigger = {
 			always = yes
 		}
 	}
 	ai_resource_production = {
 		energy = 16
 		trigger = {
 			planet_resource_compare = {
 				resource = energy
 				value >= 64
 				type = produces
 			}
 		}
 	}
 	ai_resource_production = {
 		energy = 16
 		trigger = {
 			planet_resource_compare = {
 				resource = energy
 				value >= 120
 				type = produces
 			}
 		}
 	}
}

building_planetary_shield_generator = {
	base_buildtime = @b3_time
	base_cap_amount = 1
	position_priority = 100

	category = army

	allow = {
		has_upgraded_capital = yes
		hidden_trigger = { owner = { is_ai = no } }
	}

	upgrades = {
    	"building_giga_planetary_shield_generator_1"
    }

	destroy_trigger = {
		exists = owner
		owner = { is_ai = yes }
	}

	planet_modifier = {
		planet_orbital_bombardment_damage = -0.5
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}
		upkeep = {
			energy = @b2_upkeep
		}
	}

	prerequisites = {
		"tech_planetary_shield_generator"
	}
}

# Hypershield Defensive Screen
building_giga_planetary_shield_generator_1 = {
    base_buildtime = @b4_time
    can_build = no

	allow = {
		has_upgraded_capital = yes
	}

    resources = {
        category = planet_buildings
        cost = {
            minerals = @b3_minerals
            exotic_gases = 20
        }
        upkeep = {
            energy = @b3_upkeep
            exotic_gases = 1
        }
    }

    upgrades = {
        building_giga_planetary_shield_generator_2
    }

	planet_modifier = {
		planet_orbital_bombardment_damage = -0.7
	}

		prerequisites = {
    		"tech_giga_planetary_shield_generator_1"
    	}
}

# Negative Mass Protector
building_giga_planetary_shield_generator_2 = {
    base_buildtime = 1200
    can_build = no

	allow = {
		has_upgraded_capital = yes
	}

    resources = {
        category = planet_buildings
        cost = {
            minerals = @b4_minerals
            exotic_gases = @b2_minerals
            rare_crystals = @b2_rare_cost
            ehof_sr_negative_mass = 20
        }
        upkeep = {
            energy = @b4_upkeep
            exotic_gases = @b2_upkeep
            rare_crystals = @b2_rare_upkeep
            ehof_sr_negative_mass = 2
        }
    }

	planet_modifier = {
		planet_orbital_bombardment_damage = -0.9
	}

		prerequisites = {
    		"tech_giga_planetary_shield_generator_2"
    	}
}

# Prototype Energy Anti-Transmuter
building_negative_mass_factory_1 = {
    base_buildtime = 1200
    category = resource

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b4_minerals
			exotic_gases = @b2_rare_cost
			rare_crystals = @b2_rare_cost
			volatile_motes = 50
		}
		cost = {
			trigger = {
				owner = {
					is_robot_empire = yes
				}
			}
			minerals = 900
			alloys = 700
		}
		upkeep = {
			energy = 50
			exotic_gases = @b2_rare_upkeep
			rare_crystals = @b2_rare_upkeep
			volatile_motes = 1
		}
		produces = {
			ehof_sr_negative_mass = 2
		}
	}

    upgrades = {
        building_negative_mass_factory_2
    }

	prerequisites = {
		"tech_nm_utilization_1"
	}
}

# Negative Mass Transmuter
building_negative_mass_factory_2 = {
    base_buildtime = 1200
    category = resource
    can_build = no

	resources = {
		category = planet_buildings
		cost = {
			minerals = 2600
			exotic_gases = @b3_rare_cost
			rare_crystals = @b3_rare_cost
			volatile_motes = 100
		}
		cost = {
			trigger = {
				owner = {
					is_robot_empire = yes
				}
			}
			minerals = 1200
			alloys = 900
		}
		upkeep = {
			energy = 50
			exotic_gases = @b3_rare_upkeep
			rare_crystals = @b3_rare_upkeep
			volatile_motes = @b2_rare_upkeep
		}
		produces = {
			ehof_sr_negative_mass = 5
		}
	}

		prerequisites = {
    		"tech_nm_utilization_2"
    	}
}